{
  "id": "a3cf2b16-1f0b-4a57-a77c-df7024bde954",
  "prevId": "400db9e7-780a-44b8-b0be-2db504f59104",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "customer_email": {
          "name": "customer_email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "key_hash": {
          "name": "key_hash",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "key_prefix": {
          "name": "key_prefix",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "tier": {
          "name": "tier",
          "type": "api_key_tier",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'free'"
        },
        "rate_limit_daily": {
          "name": "rate_limit_daily",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_api_keys_key_hash": {
          "name": "idx_api_keys_key_hash",
          "columns": [
            {
              "expression": "key_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_api_keys_customer_email": {
          "name": "idx_api_keys_customer_email",
          "columns": [
            {
              "expression": "customer_email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_api_keys_is_active": {
          "name": "idx_api_keys_is_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "api_keys_key_hash_unique": {
          "name": "api_keys_key_hash_unique",
          "nullsNotDistinct": false,
          "columns": [
            "key_hash"
          ]
        }
      },
      "checkConstraints": {}
    },
    "public.cache_accesses": {
      "name": "cache_accesses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "api_key_id": {
          "name": "api_key_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "normalized_url": {
          "name": "normalized_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cache_location": {
          "name": "cache_location",
          "type": "cache_location",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "accessed_at": {
          "name": "accessed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "response_time_ms": {
          "name": "response_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_cache_accesses_api_key_date": {
          "name": "idx_cache_accesses_api_key_date",
          "columns": [
            {
              "expression": "api_key_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "accessed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cache_accesses_normalized_url": {
          "name": "idx_cache_accesses_normalized_url",
          "columns": [
            {
              "expression": "normalized_url",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cache_accesses_accessed_at": {
          "name": "idx_cache_accesses_accessed_at",
          "columns": [
            {
              "expression": "accessed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "cache_accesses_api_key_id_api_keys_id_fk": {
          "name": "cache_accesses_api_key_id_api_keys_id_fk",
          "tableFrom": "cache_accesses",
          "tableTo": "api_keys",
          "columnsFrom": [
            "api_key_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.organization": {
      "name": "organization",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_price_id": {
          "name": "stripe_subscription_price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_status": {
          "name": "stripe_subscription_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_current_period_end": {
          "name": "stripe_subscription_current_period_end",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "stripe_customer_id_idx": {
          "name": "stripe_customer_id_idx",
          "columns": [
            {
              "expression": "stripe_customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.render_jobs": {
      "name": "render_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "api_key_id": {
          "name": "api_key_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "normalized_url": {
          "name": "normalized_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "job_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'queued'"
        },
        "queued_at": {
          "name": "queued_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "render_duration_ms": {
          "name": "render_duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "html_size_bytes": {
          "name": "html_size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "worker_id": {
          "name": "worker_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "puppeteer_version": {
          "name": "puppeteer_version",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_render_jobs_api_key_status": {
          "name": "idx_render_jobs_api_key_status",
          "columns": [
            {
              "expression": "api_key_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_render_jobs_normalized_url": {
          "name": "idx_render_jobs_normalized_url",
          "columns": [
            {
              "expression": "normalized_url",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_render_jobs_queued_at": {
          "name": "idx_render_jobs_queued_at",
          "columns": [
            {
              "expression": "queued_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_render_jobs_status_created": {
          "name": "idx_render_jobs_status_created",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "queued_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "render_jobs_api_key_id_api_keys_id_fk": {
          "name": "render_jobs_api_key_id_api_keys_id_fk",
          "tableFrom": "render_jobs",
          "tableTo": "api_keys",
          "columnsFrom": [
            "api_key_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.rendered_pages": {
      "name": "rendered_pages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "normalized_url": {
          "name": "normalized_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "html_size_bytes": {
          "name": "html_size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "first_rendered_at": {
          "name": "first_rendered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_accessed_at": {
          "name": "last_accessed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "access_count": {
          "name": "access_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "in_redis": {
          "name": "in_redis",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {
        "idx_rendered_pages_last_accessed": {
          "name": "idx_rendered_pages_last_accessed",
          "columns": [
            {
              "expression": "last_accessed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rendered_pages_access_count": {
          "name": "idx_rendered_pages_access_count",
          "columns": [
            {
              "expression": "access_count",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rendered_pages_in_redis": {
          "name": "idx_rendered_pages_in_redis",
          "columns": [
            {
              "expression": "in_redis",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "rendered_pages_normalized_url_unique": {
          "name": "rendered_pages_normalized_url_unique",
          "nullsNotDistinct": false,
          "columns": [
            "normalized_url"
          ]
        },
        "idx_rendered_pages_normalized_url": {
          "name": "idx_rendered_pages_normalized_url",
          "nullsNotDistinct": false,
          "columns": [
            "normalized_url"
          ]
        }
      },
      "checkConstraints": {}
    },
    "public.todo": {
      "name": "todo",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "owner_id": {
          "name": "owner_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.usage_daily": {
      "name": "usage_daily",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "api_key_id": {
          "name": "api_key_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "cache_hits": {
          "name": "cache_hits",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "cache_misses": {
          "name": "cache_misses",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "renders_completed": {
          "name": "renders_completed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "renders_failed": {
          "name": "renders_failed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "avg_cache_hit_time_ms": {
          "name": "avg_cache_hit_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "avg_render_time_ms": {
          "name": "avg_render_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "storage_bytes_added": {
          "name": "storage_bytes_added",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_storage_bytes": {
          "name": "total_storage_bytes",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {
        "idx_usage_daily_api_key_date": {
          "name": "idx_usage_daily_api_key_date",
          "columns": [
            {
              "expression": "api_key_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_usage_daily_date": {
          "name": "idx_usage_daily_date",
          "columns": [
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "usage_daily_api_key_id_api_keys_id_fk": {
          "name": "usage_daily_api_key_id_api_keys_id_fk",
          "tableFrom": "usage_daily",
          "tableTo": "api_keys",
          "columnsFrom": [
            "api_key_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usage_daily_api_key_date_unique": {
          "name": "usage_daily_api_key_date_unique",
          "nullsNotDistinct": false,
          "columns": [
            "api_key_id",
            "date"
          ]
        }
      },
      "checkConstraints": {}
    }
  },
  "enums": {
    "public.api_key_tier": {
      "name": "api_key_tier",
      "schema": "public",
      "values": [
        "free",
        "pro",
        "enterprise"
      ]
    },
    "public.cache_location": {
      "name": "cache_location",
      "schema": "public",
      "values": [
        "hot",
        "cold",
        "none"
      ]
    },
    "public.job_status": {
      "name": "job_status",
      "schema": "public",
      "values": [
        "queued",
        "processing",
        "completed",
        "failed"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}